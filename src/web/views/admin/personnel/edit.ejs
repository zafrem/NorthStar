<%- include('../../layouts/main', { body: `
<div class="page-header">
  <h1>Edit Personnel</h1>
  <p class="page-subtitle">Update user information</p>
</div>

${success ? `<div class="alert alert-success">${success}</div>` : ''}
${error ? `<div class="alert alert-error">${error}</div>` : ''}

<div class="card">
  <div class="card-body">
    <form action="/admin/personnel/${targetUser.id}" method="POST">
      <div class="form-row">
        <div class="form-group">
          <label for="name">Name *</label>
          <input type="text" id="name" name="name" value="${targetUser.name}" required>
        </div>
        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" id="email" name="email" value="${targetUser.email}" required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Organization</label>
          <p class="form-static">${organizations.find(o => o.id === '${targetUser.orgId}')?.name || 'Unknown'}</p>
          <span class="form-help">Organization cannot be changed after creation</span>
        </div>
        <div class="form-group">
          <label for="jobFunction">Job Function</label>
          <input type="text" id="jobFunction" name="jobFunction" value="${targetUser.jobFunction || ''}">
        </div>
      </div>

      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" name="isLeader" ${targetUser.isLeader ? 'checked' : ''}>
          Is Leader
        </label>
        <span class="form-help">Leaders can manage goals within their organization</span>
      </div>

      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" name="isAdmin" ${targetUser.isAdmin ? 'checked' : ''}>
          Is Admin
        </label>
        <span class="form-help">Admins have full system access</span>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Update Personnel</button>
        <a href="/admin/personnel" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>
</div>

<div class="card">
  <div class="card-header">
    <h2>Danger Zone</h2>
  </div>
  <div class="card-body">
    <form action="/admin/personnel/${targetUser.id}/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete this user? This action cannot be undone.')">
      <p class="text-muted">Deleting this user will remove all their data from the system.</p>
      <button type="submit" class="btn btn-danger">Delete Personnel</button>
    </form>
  </div>
</div>

<div class="page-actions">
  <a href="/admin/personnel" class="btn btn-secondary">Back to Personnel List</a>
</div>
` }) %>